{% extends "base.html" %}

{% block content %}
<div class="dashboard-shell">
  <aside class="dashboard-sidebar">
    <div class="sidebar-card">
      <div class="sidebar-title">{{ group.name }}</div>
      <a class="sidebar-action" href="{% url 'rachais:group_detail' group.id %}">← Voltar ao grupo</a>
    </div>
  </aside>

  <section class="dashboard-main">
    {% if messages %}
      <div class="flash-stack">
        {% for m in messages %}
          <div class="flash flash-{{ m.tags|default:'info' }}">{{ m }}</div>
        {% endfor %}
      </div>
    {% endif %}

    <div class="panel">
      <div class="panel-header">
        <div>
          <h1 class="panel-title">Adicionar despesa</h1>
          <p class="panel-subtitle">Registre uma nova despesa para o grupo.</p>
        </div>
      </div>
      <form method="post" class="form-stack">
        {% csrf_token %}
        <label class="form-label" for="description">Descrição</label>
        <input class="form-input" id="description" name="description" type="text" maxlength="255" placeholder="Ex.: Almoço" required>

        <label class="form-label" for="amount">Valor (R$)</label>
        <input class="form-input" id="amount" name="amount" type="text" inputmode="decimal" placeholder="Ex.: 100,00" required>

        <label class="form-label" for="paid_by">Quem pagou?</label>
        <select class="form-input" id="paid_by" name="paid_by" required>
          <option value="">Selecione</option>
          {% for p in participants %}
            <option value="{{ p.user.id }}">{{ p.display_name }}</option>
          {% endfor %}
        </select>

        <div class="form-actions">
          <a class="btn-secondary" href="{% url 'rachais:group_detail' group.id %}">Cancelar</a>
          <button class="btn-primary" type="submit">Salvar</button>
        </div>
      </form>
    </div>
  </section>
</div>
{% endblock %}
